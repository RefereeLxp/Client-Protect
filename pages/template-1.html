<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="format-detection" content="telephone=no, email=no">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>这是一个页面</title>
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../src/css/main.css"/>
    <link rel="stylesheet" href="../src/css/template-page.css"/>
    <link rel="stylesheet" href="../src/css/template-1.css"/>
    <link rel="stylesheet" href="../src/css/style.css"/>
</head>
<body>
<div class="content">
    <nav class="tp-nav">
        <div class="tp-comeback">
            <div>
                <img src="../src/image/back.png" alt=""/><span>返回</span>
            </div>
        </div>
        <div class="tp-pagetop">
            <div>
                <span>存库页面</span>
            </div>
        </div>
    </nav>
    <main class="tp-main">
        <div class="tp-main-lf">
            <div class="tab-content">
                <div class="block"></div>
                <div id="test0" class="tp-main-lf-info tp-tb-content tab-pane fade ">
                    <!--人员扫卡-->
                    <div class="tp-tb-content">
                        <div class="tp-card-lf">
                            <div class="info-box">
                                <div>
                                    <p>
                                        <span>姓名：</span><b>某某某</b>
                                    </p>
                                    <p>
                                        <span>卡号：</span><b>011720118</b>
                                    </p>
                                    <p>
                                        <span>部门：</span><b>航空宇航</b>
                                    </p>
                                    <p>
                                        <span>备注：</span><b>************************************************************************</b>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="tp-card-rg">
                            <div class="info-box photo-box">
                                <div>
                                    <img src="../src/image/test.jpg" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="test1" class="tp-main-lf-info tp-tb-content tab-pane fade ">
                    <!--人员扫卡-->
                    <div class="tp-tb-content">
                        <div class="tp-card-lf">
                            <div class="info-box">
                                <div>
                                    <p>
                                        <span>姓名：</span><b>某某某</b>
                                    </p>
                                    <p>
                                        <span>卡号：</span><b>011720118</b>
                                    </p>
                                    <p>
                                        <span>部门：</span><b>航空宇航</b>
                                    </p>
                                    <p>
                                        <span>备注：</span><b>************************************************************************</b>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="tp-card-rg">
                            <div class="info-box photo-box">
                                <div>
                                    <img src="../src/image/test.jpg" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="test2" class="tp-main-lf-info tp-tb-content tab-pane fade ">
                    <!--人员扫卡-->
                    <div class="tp-tb-content">
                        <div class="tp-card-lf">
                            <div class="info-box">
                                <div>
                                    <p>
                                        <span>姓名：</span><b>某某某</b>
                                    </p>
                                    <p>
                                        <span>卡号：</span><b>011720118</b>
                                    </p>
                                    <p>
                                        <span>部门：</span><b>航空宇航</b>
                                    </p>
                                    <p>
                                        <span>备注：</span><b>************************************************************************</b>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="tp-card-rg">
                            <div class="info-box photo-box">
                                <div>
                                    <img src="../src/image/test.jpg" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="block"></div>
            </div>
        </div>
        <div class="tp-main-rg">
            <div class="tp-btn-level tp-btn-level-1">
                <div class="tp-btn-1">
                    <div class="tp-btn-info">
                        <img src="../src/image/btn-1.png" alt="" class="static"/>
                        <img src="../src/image/btn-1-s.png" alt="" class="dynamic"/>
                        <div class="tp-btn-box active" data-tab="0">
                            <a class="tab-a" data-toggle="tab" href="#test0">
                                <span><b class="icon-saoka"></b>信息确认</span>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="tp-btn-other-1"></div>
            </div>
            <div class="tp-btn-level tp-btn-level-2">
                <div class="block"></div>
                <div class="tp-btn-2">
                    <div class="tp-btn-info">
                        <img src="../src/image/btn-2.png" alt="" class="static"/>
                        <img src="../src/image/btn-2-s.png" alt="" class="dynamic"/>
                        <div class="tp-btn-box" data-tab="1">
                            <a class="tab-a" data-toggle="tab" href="#test1">
                                <span><b class="icon-saoma"></b>设备扫码</span>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="block"></div>
            </div>
            <div class="tp-btn-level tp-btn-level-3">
                <div class="tp-btn-3">
                    <div class="tp-btn-info">
                        <img src="../src/image/btn-3.png" alt="" class="static"/>
                        <img src="../src/image/btn-3-s.png" alt="" class="dynamic"/>
                        <div class="tp-btn-box" data-tab="2">
                            <a class="tab-a" data-toggle="tab" href="#test2">
                                <span><b class="icon-dayin"></b>打印二维码</span>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="block"></div>
                <div class="tp-btn-other-2"></div>
            </div>
        </div>
    </main>
    <footer class="tp-foot">
        <div class="block"></div>
        <div class="tp-submit-box">
            <div class="tp-submit-btn" data-index="0">下一步</div>
        </div>
    </footer>
</div>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="../plugins/jquery.rotate/jquery.rotate.min.js"></script>
<script>
    var list=[0,1,2];
    $(function () {
        $('.tp-main-rg .tab-a:first').tab('show');
    });
    $('.tp-btn-1 .tp-btn-info').addClass('active');
    var fister_rotate = $('.tp-btn-1').find('.dynamic');
    img_rotate(fister_rotate);
    $('.tp-main-rg').on('click', '.tp-btn-box', function () {
        var num = $(this).attr('data-tab');
        $(this).addClass('active');
        $(this).parent().addClass('active');
        $('.tp-submit-btn').attr('data-index',num);
        if(num==list.length-1){
            $('.tp-submit-btn').html('确认');
        }else{
            $('.tp-submit-btn').html('下一步');
        }
        var address = $('[data-tab=' + num + ']').parent().find('.dynamic');
        img_stoprotate();
        img_rotate(address);
        for (var i = 0; i < list.length; i++) {
            if (num != i) {
                $("[data-tab=" + i + "]").removeClass('active');
                $("[data-tab=" + i + "]").parent().removeClass('active');
                var address = $('[data-tab=' + i + ']').parent().find('.dynamic');
            }
        }
    });
    var int;
    function img_rotate(address) {
        var angle = 0;
        int = setInterval(function () {
            angle += 3;
            address.rotate({angle});
        }, 50);
    }
    function img_stoprotate() {
        int = window.clearInterval(int);
    }
    $('.tp-submit-btn').click(function () {
        var index=parseInt($(this).attr('data-index'));
        if(index<list.length-1){
            console.log(index+1);
            console.log($('[data-tab='+ (index+1) +']').html());
            $('[data-tab='+ (index+1) +']').addClass('active');
            $('[data-tab='+ (index+1) +']').parent().addClass('active');
            img_stoprotate();
            var address = $('[data-tab=' + (index+1) + ']').parent().find('.dynamic');
            img_rotate(address);
            for (var i = 0; i < list.length; i++) {
                if (index+1 != i) {
                    $("[data-tab=" + i + "]").removeClass('active');
                    $("[data-tab=" + i + "]").parent().removeClass('active');
    //                var address = $('[data-tab=' + i + ']').parent().find('.dynamic');
                }
            }
                $(this).html('下一步');
                $(this).attr('data-index',index+1);
        }
        if(index==list.length-2){
            $(this).html('确认');
        }
    })
</script>
</body>
</html>